<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />

    <title>Bingo</title>

    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="text/javascript" src="BingoCard.js"></script>
    <script type="text/javascript" src="BallDraw.js"></script>

    <style>
        body {
            background: #52F3EA;
            height: 100vh;
            align-content: center;
            overflow: auto;
        }

        .bingoHeader {
            font-family: Comic Sans MS, Comic Sans, cursive;
            font-style: italic;
            font-style: oblique;
            font-size: 30px;
            text-align: center;
            background-image: url();
            background-attachment: fixed;
            background-size: 100% 100%;
            top: 0px;
            left: 0px;
            width: cover;
            padding: 1rem;
            display: none;
            color: black;
            font-weight: bold;
        }

        .bingoIntro {
            color: black;
            font-family: Georgia, Garamonf, Serif;
            margin-bottom: 2rem;
            width: 600px;
            position: absolute;
            background: #CAD3C8;
            border-radius: 4px;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.2);
            top: 10rem;
            left: 24rem;
            text-align: center;
            padding: 1rem;
            display: flex;
            flex-flow: row wrap;
            height: auto;
        }

        .genNum {
            padding-right: 2rem;
            padding-left: 2rem;
            margin-left: 11rem;
            margin-top: 1.5rem;
            background: #46F0A9;
            box-shadow: 5px 10px #888888;
            width: 12rem;
            border-radius: 10px;
            height: 9rem;
        }

        .bingoDesc {
            background: #DB8079;
            margin-right: 2rem;
            margin-left: 2rem;
            display: block;
            box-shadow: 5px 10px #888888;
        }

        .winnerCard {
            background-color: green;
            margin-left: 8rem;
            height: auto;
            display: none;
            box-shadow: 5px 10px #888888;
            padding: 1rem;
        }

        .cloneDiv1 {
            padding-top: 1rem;
            border-radius: 5px;
            background-color: Skyblue;
            margin-top: 1rem;
            padding-left: .5rem;
            padding-right: .5rem;
            padding-bottom: .5rem;
            overflow: none;
        }

        p {
            text-indent: 10px;
        }

        th,
        td {
            font-family: Serif;
            margin: 0 auto;
            text-align: center;
            border: 3px solid black;
            width: 20%;
        }


        td {
            padding: 1rem;
            border: 1px solid black;
        }

        .tableContainers {
            margin-left: 1rem;
            padding-top: 1rem;
            padding-left: .5rem;
            padding-right: .5rem;
            padding-bottom: .5rem;
            border-radius: 10px;
            background-color: green;
            margin-top: 1rem;
            width: 300px;
        }

        .tables {
            border-collapse: collapse;
            text-align: center;
            background-color: pink;
        }

        .theads {
            background-color: maroon;
        }

        .tHeader {
            color: Apricot;
            font-family: Georgia, Garamonf, Serif;
        }

        .cardPlay {
            margin-top: 4rem;
            margin-right: 20rem;
            margin-left: 4rem;
            height: auto;
            display: flex;
            flex-flow: row wrap;
            position: absolute;
        }


        .drawBall {
            position: fixed;
            margin-left: 70%;
            right: 25px;
            top: 13em;
            bottom: 9rem;
            width: 250px;
            background: #079992;
            text-align: center;
            border-radius: 20%;
            display: none;
        }

        .ballDrawns {
            background: yellow;
            border: 1px solid blue;
            padding: 2rem;
            border-radius: 50%;
            width: 50px;
            margin-left: 4rem;
        }

        .drawButton {
            margin-top: .1rem;
            padding: 1rem;
            border-radius: 2rem;
        }

        .genClear {

            position: fixed;
            margin-left: 70%;
            top: 75%;
            right: 20px;

            width: 200px;
        }

        .numberInput {
            padding: .5rem;
            margin-left: 4px;
            border-radius: 15px;
            margin-bottom: 10px;
            position: absolute;
            display: block;
            border: 1px solid black;
            background: #eeeeee;
            outline: none;
            transition: background 0.2s, border-radius 0.2s;
        }

        .numberInput:focus {
            border-color: #009579;
            background: #ffffff;
        }

        .generateButton {
            position: absolute;
            margin-top: 1.3rem;
            padding: .5rem;
            margin-left: 9px;
            border-radius: 10px;
            display: block;
        }

        .clearButton {
            position: absolute;
            padding-top: .5rem;
            padding-bottom: .5rem;
            padding-left: 3rem;
            padding-right: 3rem;
            border-radius: 10px;
            margin-left: -8rem;
            margin-top: 4rem;
        }

        button:hover {
            background: var(--color-primary-dark);
            cursor: pointer;
        }

        button:active {
            transform: scale(0.98);
        }

        .winnerText {
            margin-left: 11rem;
            display: none;
        }
    </style>


</head>

<body
    style="background: url(https://store-images.s-microsoft.com/image/apps.34080.13510798887528624.ea88a7e6-557c-4ad5-99d7-c574f430c827.3c187ff1-754c-409a-9085-8e3aac2d97c5?mode=scale&q=90&h=1080&w=1920)">
    <div class="bingoHeader" id="bingoHeader">
        <h1>Lets Play Bingo</h1>
    </div>
    <div id="bingoIntro" class="bingoIntro">
        <div class="winnerText" id="winnerText">
            <h1>Winner Card</h1>
        </div>
        <div class="bingoDesc" id='bingoDesc'>
            <h1>Miss Ballantine </h1>
            <p style="margin-right: 1rem">Low Budget Bingo</p>
        </div>
        <div class="winnerCard" id="winnerCard">
        </div>
        <div class="genNum" id="genNum">
            <p></p>
            <h3>Try to Play Bingo!</h3>
            <input type="text" id="numberInput" class="numberInput" placeholder="Input Number Of Cards"><br>
            <button onclick="generateNewCard()" class="generateButton" id='generateButton'>GENERATE NEW CARD</button>
        </div>
    </div>
    <div class='cardPlay' id='cardPlay'></div>
    <div class='drawBall' id='drawBall'>
        <h1 id='ballDrawns' class='ballDrawns'>0</h1>
        <button onclick="Draw()" class="drawButton">DRAW BALL</button>
        <button onclick="clearAll()" id='clearButton' class="clearButton">CLEAR</button>

    </div>
    <script>
        // Description:    Creates an Array where matrix serves as the multidimensional array
        // 					and usedNum array will be the storage of 1-75 numbers
        // 					this two will be used in creating instances for our class

        let matrix = new Array();
        let usedNum = new Array();


        //  Description:    Here we created a variable which value is the tags which we call using their id
        // -------------------------------------------------

        let bingoHeader = document.getElementById('bingoHeader');
        let bingoIntro = document.getElementById('bingoIntro');
        let textbox = document.getElementById('numberInput');
        let drawBallDiv = document.getElementById('drawBall');
        let bingoDesc = document.getElementById('bingoDesc');
        let cloneDiv1 = document.getElementById('cloneDiv1');
        let winnerCard = document.getElementById('winnerCard');
        let winnerText = document.getElementById('winnerText');


        //  Function:      	generateNewCard
        //  Description:    generates card and creating instances for BingoCard class
        // -------------------------------------------------

        function generateNewCard() {

            // this will be the users input number of cards

            let input = document.getElementById('numberInput').value;
            // error cheking
            if (isNaN(input)) {
                alert("You must input a Number");
                textbox.value = '';
            } else if (textbox.value == '') {
                alert("  Input Number Of Cards")
            } else {

                // creating new instances for the class BingoCard

                let Bingo = new BingoCard(matrix, usedNum, input);
                // calling BingoCard methods
                Bingo.drawCard();
                // this is responsible for the design switching
                drawBallDiv.style.display = 'block';
                bingoIntro.style.display = 'none';
                bingoHeader.style.display = 'block';
                winnerCard.style.display = 'none';
                winnerCard.innerHTML = '';
            }
        }


        //  Function:      	Draw
        //  Description:    Draws ball for the game and creating instances for BallDraw class
        // -------------------------------------------------	
        function Draw() {
            let input = document.getElementById('numberInput').value;
            let ballDraw = new BallDraw(matrix, usedNum, input);
            ballDraw.drawBall();
            ballDraw.getCardWinner();

        }

        //  Function:      	clearAll
        //  Description:    clear all table data 


        function clearAll() {
            let input = document.getElementById('numberInput').value;
            let ballDraw = new BallDraw(matrix, usedNum, input);
            let dlete = confirm("Delete all Cards?")

            if (dlete) {
                ballDraw.deleteBallDrawn();
                textbox.value = '';
                document.getElementById('cardPlay').innerHTML = "";
                matrix.length = '';
                drawBallDiv.style.display = 'none';
                bingoIntro.style.display = 'flex';
                bingoHeader.style.display = 'none';
                bingoDesc.style.display = 'block';
                winnerCard.style.display = 'none';
                winnerText.style.display = 'none';

            }

        }
    </script>
    <script>
        class BingoCard {

            constructor(matrix, usedNum, input) {
                this.matrix = matrix;
                this.arr = new Array(0, 1, 2, 3, 4, 0, 1, 2, 3, 4, 0, 1, 2, 3, 4, 0, 1, 2, 3, 4, 0, 1, 2, 3, 4);
                this.usedNum = usedNum;
                this.input = input;
            }

            //  Function:       getRandomNumber
            //  Description:    Generates random numbers

            getRandomNum() {
                return Math.floor(Math.random() * 15);
            }

            //  Function:       addArrayList
            //  Description:    Creates an array of 75 and inserting it in the this.usedNum array


            addArrayList() {
                for (let a = 0; a < 76; a++) {
                    this.usedNum[a] = a;
                }
            }


            //  Function:       generateMatrix
            //  Description:    generates numbers for our bingo card and store in 
            //					a 2 dimensional array which is the this.matrix array
            // 					also returns this.matrix


            generateMatrix() {

                // here we will get the user input number and make a 2 dimensional array

                for (let i = 0; i < this.input; i++) {
                    this.addArrayList();
                    this.matrix[i] = new Array();

                    // this one will generate random numbers and store it in a multi dimensional array
                    // we use do wile loop to avoid duplication of numbers 

                    for (let j = 0; j < 25; j++) {
                        let ranNum = (this.arr[j] * 15) + this.getRandomNum() + 1;

                        do {
                            ranNum = (this.arr[j] * 15) + this.getRandomNum() + 1;
                        }
                        while (this.usedNum.indexOf(ranNum) == -1);

                        this.matrix[i].push(ranNum);
                        this.usedNum.splice(usedNum.indexOf(ranNum), 1);
                    }
                }

                return this.matrix;

            }


            //  Function:       drawcard
            //  Description:   responsible for creating table and putting values in every cell
            // -------------------------------------------------

            drawCard() {

                this.generateMatrix();

                let cardForm = document.getElementById('cardForm');
                let arr = ['B', 'I', 'N', 'G', 'O'];

                // this loop will create a div tag with id and class which becomes the container of our table
                // and append to another div which we created in html file

                for (let k = 0; k < this.input; k++) {
                    let setIdName = 'div' + k;
                    let newDiv = document.createElement('div');
                    let cardPlay = document.getElementById('cardPlay');
                    newDiv.setAttribute('id', setIdName);
                    newDiv.setAttribute('class', 'tableContainers')
                    cardPlay.appendChild(newDiv);
                }

                // this loop is where we create a table body for our card

                for (let b = 0; b < this.input; b++) {
                    let count = 0;
                    let idName = 'div' + b;
                    let tableId = 'table' + b;
                    let newTable = document.createElement('table');
                    let thRow = newTable.insertRow(0);
                    thRow.setAttribute('class', 'theads');
                    newTable.setAttribute('id', tableId);
                    newTable.setAttribute('class', 'tables');

                    // this loop inserts first row in our table which contains the
                    // header of our card which is the B, I, N, G, O
                    for (let c = 0; c < 5; c++) {
                        let thCell = thRow.insertCell(c);
                        thCell.innerHTML = `<b>${arr[c]}</b>`;
                        thCell.setAttribute('class', 'tHeader');
                    }

                    // here is the process of inserting cells in the table and putting value on  each cell
                    // --------------------------------------

                    for (let d = 1; d <= 5; d++) {
                        let rowId = 'row' + d;
                        let newRow = newTable.insertRow(d);
                        newRow.setAttribute('id', rowId);
                        for (let e = 0; e < 5; e++) {
                            let newCell = newRow.insertCell(e);
                            let cellId = 'cell' + b + d + e;
                            newCell.setAttribute('id', cellId);
                            if (d == 3 && e == 2) {
                                newCell.innerHTML = `<b>${"FREE"}</b>`;
                                newCell.setAttribute('style', 'background: red');
                            } else {
                                newCell.innerHTML = `<b>${this.matrix[b][count]}</b>`;
                            }
                            count++;
                        }

                    }
                    // here we append the table on its container the div that we on the first loop
                    document.getElementById(idName).appendChild(newTable);

                }
                this.addArrayList();

            }
        }





        class BallDraw extends BingoCard {

            constructor(matrix, usedNum, input) {
                super(matrix, usedNum, input);
                this.ballArray = new Array();
                this.winner = false;
            }

            //  Function:      	markCard
            //  Description:    setting background for a specific cell
            // -------------------------------------------------

            markCard(n) {
                return n.setAttribute('style', 'background: orange');
            }

            //  Function:       drawBall
            //  Description:   generate a random number (1-75) per user click on the “DRAW BALL” button to be stored in its “ballDrawns” property.
            // generates random numbers from 1-75 and if the number matches
            // 					on the value of the cell the markCard will be executed
            // -------------------------------------------------

            drawBall() {
                let tableCell;
                let ballDrawn = Math.floor(Math.random() * 75);
                do {
                    ballDrawn = Math.floor(Math.random() * 75 + 1);
                }
                while (usedNum.indexOf(ballDrawn) == -1);

                this.usedNum.splice(this.usedNum.indexOf(ballDrawn), 1);

                for (let n = 0; n < this.input; n++) {

                    for (let z = 1; z < 6; z++) {
                        for (let x = 0; x < 5; x++) {
                            let tblCell = 'cell' + n + z + x;
                            tableCell = document.getElementById(tblCell);

                            if (tableCell.innerText == ballDrawn) {
                                this.markCard(tableCell);
                                tableCell = true;
                            }

                        }
                    }

                }
                document.getElementById('ballDrawns').innerHTML = ballDrawn;

            }


            //  Function:       deletBallDrawn
            //  Description:    setting the value of p tag into 0
            // -------------------------------------------------

            deleteBallDrawn() {
                return document.getElementById('ballDrawns').innerHTML = '0';

            }


            //  Function:       getCardWinner
            //  Description:    getting the clone of the the card that has a combination of 5 cells 
            // 					with orange color horizontally and appneding it into a div that store
            // 					the winner card
            // -------------------------------------------------

            getCardWinner() {
                let bingoHeader = document.getElementById('bingoHeader');
                let bingoIntro = document.getElementById('bingoIntro');
                let textbox = document.getElementById('numberInput');
                let genButton = document.getElementById('generateButton');
                let drawBallDiv = document.getElementById('drawBall');
                let bingoDesc = document.getElementById('bingoDesc');
                let winnerCard = document.getElementById('winnerCard');
                let genNum = document.getElementById('genNum');
                let winnerText = document.getElementById('winnerText');



                for (let uno = 0; uno < this.input; uno++) {
                    let cloneDivId = 'div' + uno;
                    for (let dos = 1; dos < 6; dos++) {
                        for (let tres = 0; tres < 5; tres++) {
                            let cell = 'cell' + uno + dos + tres;
                            this.ballArray.push(cell);
                        }
                        let cell1 = document.getElementById(this.ballArray[0]);
                        let cell2 = document.getElementById(this.ballArray[1]);
                        let cell3 = document.getElementById(this.ballArray[2]);
                        let cell4 = document.getElementById(this.ballArray[3]);
                        let cell5 = document.getElementById(this.ballArray[4]);

                        if (cell1.hasAttribute('style') && cell2.hasAttribute('style') && cell3.hasAttribute(
                                'style') &&
                            cell4.hasAttribute('style') && cell5.hasAttribute('style')) {
                            this.winner = true;
                            this.ballArray.splice(0, 5);
                            break;

                        } else {
                            this.ballArray.splice(0, 5);


                        }
                    }
                    if (this.winner) {
                        let itm = document.getElementById(cloneDivId);
                        let cln = itm.cloneNode(true);
                        cln.setAttribute('class', 'cloneDiv1');
                        cln.removeAttribute('id');
                        winnerCard.appendChild(cln);

                        document.getElementById('numberInput').value = '';
                        document.getElementById('cardPlay').innerHTML = "";
                        bingoDesc.style.display = 'none';
                        winnerCard.style.display = 'flex';
                        drawBallDiv.style.display = 'none';
                        bingoIntro.style.display = 'flex';
                        bingoHeader.style.display = 'none';
                        winnerText.style.display = 'block';
                        this.matrix.length = '';
                        this.deleteBallDrawn();
                        this.winner = false;
                        break;

                    }

                }

            }

        }
    </script>
</body>

</html>
